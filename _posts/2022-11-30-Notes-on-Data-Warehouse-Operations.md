---
title: 数据仓库工作笔记
categories: 开发随笔
tags: [建模]
description: 
comments: false
author: Tang Qi
sidebar:
  nav: docs-cn
aside:
  toc: true
layout: post
---

根据数据加工顺序，数据仓库通常包含以下几个主要数据层：

+ 数据采集层（ODS的上一层）：负责从业务系统中抽取数据，并将其加载到ODS层中，保证数据的准确性和完整性，需要进行严格的数据对账监控。常见的数据源有消息队列 （比如Kafka），实时处理框架（Flink、Spark Streaming）。

  

+ ODS层（操作数据源层）：用于存储原始操作数据。数据来源包括业务系统的实时更新、日常运营数据等。在ods层基本只储存原始的业务实时操作数据，不做清洗和转换，需要保留数据的即时性和完整性，需要留意数据来源多样化的问题。由于时间等格式没有统一，一般不对下游业务开放。通常保留较短的时间，一般为几个月至一年。

  

+ DWD层（明细层）：将ods层的数据进行清洗、加工和主题数据的字段合并，形成有完整业务逻辑的集合，是业务层与后续数仓之间的隔离层。这层的数据可被用于支持下游业务的查询和报表需求。 DWD层保留比ODS更长的时间，也会被用于数据长期归档。

  

+ TMP层（临时层）：主要存放临时性数据，这些数据可能需要在数据处理过程中使用，但通常不会对外部用户或应用程序开放。TMP层的数据可以是在数据清洗、转换或加载过程中临时生成的，也可以是汇总的数据层，但由于数据敏感，权限管理等原因，不便对下游开放。

  

+ DWS层（汇总层）：在dwd层基础上，进一步聚合和汇总数据，以满足决策支持系统等需要高性能数据访问的应用。DWS层的数据通常被优化为多维度数据模型，常以视图的形式对下游开发，支持复杂的分析，业务报表生成，下游业务离线逻辑加工。搜推相关的在线业务依赖实时的数据模型，一般不从离线的dws层获取。

  

+ ADS层（应用服务层）：为最终用户提供数据访问和服务的接口层，如数据API、数据可视化、活动报表等。直接服务于业务应用和决策支持系统。根据业务需求而定保留时间，数据量大的接口数据为便于查询，往往保留较短时间。用于报表查询的一般长期保留。



数仓需要进行实时数据流处理，数据抽取/采集，离线数据模型构建，质量监控计算治理存储治理，也需要做ETL工具和UDF的开发。







